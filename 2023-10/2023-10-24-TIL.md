# 9️⃣ 구조체와 클래스

`10월 24일`

구조체와 클래스는 프로그래머가 데이터를 용도에 맞게 묶어 표현하고자 할 때 유용하다.

구조체와 클래스는 프로퍼티와 메서드를 사용하여 구조화된 데이터와 기능을 가질 수 있다.

하나의 새로운 사용자 정의 데이터 타입을 만들어 주는 것이다.

스위프트에서는  구조체와 클래스의 모습과 문법이 거의 흡사하다.

다만 구조체의 인스턴스는 값 타입이고, 

클래스의 인스턴스는 참조타입이라는 것이 둘을 구분하는 가장 큰 차이점이다.

이제까지 우리가 알아본 스위프트의 데이터 타입과 열거형은 모두 값 타입이다.

그러나 구조체와 함께 배워볼 클래스는 참조 타입이다.

C언어와 Objective-C의 포인터와 유사한 개념이다.

일부 프로그래밍 언어는 소스파일 하나에 구조체 또는 클래스 하나만 선언하고 구현할 수 있는 반면,

스위프트에는 그런 제약사항이 전혀 없다.

소스파일 하나에 여러 개의 구조체와 여러 개의 클래스를 정의하고 구현해도 문제가 없다.

또, 중첩 함수와 마찬가지로 구조체 안에 구조체, 클래스 안에 클래스 등과 같이 중첩 탕비의 정의 및 선언이 가능하다.

## 구조체

struct 키워드로 정의한다.

### [ NOTE ] 구조체 명명법

구조체를 정의한다는 것은 새로운 타입을 생성해주는 것과 마찬가지로 기본 타입 이름 ( Int, String, Bool등)처럼 대문자 카멜케이스를 사용하여 이름을 지어준다. 프로퍼티와 메서드는 소문자 카멜케이스를 사용하여 이름을 지어준다. 

```swift
struct 구조체 이름 {
    프로퍼티와 메서드
}
```

```swift
struct BasicInformation {
    var name: String
    var age: Int
}
```

### 구조체 인스턴스의 생성 및 초기화

구조체의 정의를 마친 후, 인스턴스를 생성하고 초기화하고자 할 때는 기본적으로 생성되는 멤버 와이즈 이니셜라이저를 사용한다.

구조체에 기본 생성된 이니셜라이저의 매개변수는 구조체의 프로퍼티 이름으로 자동 지정된다.

인스턴스가 생성되고 초기화된 후 프로퍼티 값에 접근하고 싶다면 마침표(.)를 사용하면 된다.

구조체를 상수 let으로 선언하면 인스턴스 내부의 프로퍼티 값을 변경할 수 없고, 변수 var로 선언하면 내부의 프로퍼티가 var로 선언된 경우에 값을 변경해줄 수 있다.

```swift
struct BasicInformation {
    var name: String
    var age: Int
}

// 프로퍼티 이름(name, age)으로 자동 생성된 이니셜라이저를 사용하여 구조체를 생성한다.
var hogeunInfo: BasicInformation = BasicInformation(name: "hogeun", age: 27)
hogeunInfo.age = 100 // 변경가능
hogeunInfo.name = "donghee" // 변경가능

let hogeunInfo2: BasicInformation = BasicInformation(name: "hogeun", age: 27)
hogeunInfo2.age = 100 // 변경 불가능
hogeunInfo2.name = "donghee" // 변경 불가능
```

## 클래스

스위프트의 클래스는 부모 클래스가 없더라도 상속 없이 단독으로 정의가 가능하다.

### 클래스 정의

클래스를 정의할 때는 class라는 키워드를 사용한다.

### [ NOTE ] 클래스 명명법

클래스를 정의한다는 것은 새로운 타입을 생성해주는 것과 마찬가지므로 기본 타입 이름(Int, String, Bool 등등) 처럼 대문자 카멜케이스를 사용하여 이름을 지어준다. 프로퍼티와 메서드는 소문자 카멜케이스를 사용하여 이름을 지어준다.

 

```swift
class 클래스 이름 {
	프로퍼티와 메서드들
}
```

클래스를 정의하는 방법은 구조체와 흡사하지만, 

클래스는 상속받을 수 있기 때문에 상속받을 때는 클래스 이름 뒤에 콜론( :) 을 써주고 부모클래스 이름을 명시한다.

```swift
class 클래스 이름: 부모 클래스 이름 {
	프로퍼티와 메서드들
}
```

```swift
class Person {
    var height: Float = 0.0
    var weight: Float = 0.0
}
```

정의된 클래스는 Float 타입인 height와 weight 저장 프로퍼티가 있는 Person 클래스이다.

### 클래스 인스턴스의 생성과 초기화

클래스를 정의한 후, 인스턴스를 생성하고 초기화하고자 할 때는 기본적인 이니셜라이저를 사용한다.

Person클래스에서는 프로퍼티의 기본값이 지정되어 있으므로 전달인자를 통하여 따로 초기값을 전달해주지 않아도 된다.

### [ NOTE ] 인스턴스와 객체

흔히 다른 프로그래밍 언어에서는 클래스의 인스턴스를 객체라고 부른다. 물론 스위프트에서도 객체라고 부르는 것이 틀린 것은 아니지만, 스위프트 공식 문서에는 좀더 한정적인 인스턴스라는 용어를 사용한다.

보통 객체지향 프로그래밍 패러다임을 지향하는 언어에서는 클래스의 인스턴스를 객체라고 통칭한다.

인스턴스가 생성되고 초기화된 후(이니셜라이저된 후 ) 프로퍼티 값에 접근하고 싶다면 마침표(.)를 사용하면 된다.

구조체와는 다르게 클래스의 인스턴스는 참조 타입이므로 클래스의 인스턴스를 상수 let으로 선언해도 내부 프로퍼티 값을 변경할 수 있다.

### Person 클래스의 인스턴스 생성 및 사용

```swift
class Person {
    var height: Float = 0.0
    var weight: Float = 0.0
}

var sample1: Person = Person()
sample1.height = 123.4
sample1.weight = 123.4

let sample2: Person = Person()
sample2.height = 123.5
sample2.weight = 123.5

print(sample1.height)
print(sample2.height)
123.4
123.5
```

### 클래스 인스턴스의 소멸

클래스의 인스턴스는 참조 타입이므로 더는 참조할 필요가 없을 때 메모리에서 해제된다.

이 과정을 소멸이라고 하는데 소멸되기 직전 deinit라는 메서드가 호출된다.

클래스 내부에 deinit메서드를 구현해주면 소멸되기 직전 deinit메서드가 호출된다.

이렇게 호출되는 deinit 메서드는 디이니셜라이저라고 부른다.

deinit메서드는 클래스당 하나만 구현할 수 있으며, 매개변수와 반환 값을 가질 수 없다. 

deinit메서드는 매개변수를 위한 소괄호도 적어주지 않는다.

```swift
class Person {
    var height: Float = 0.0
    var weight: Float = 0.0
    
    deinit {
        print("Person 클래스의 인스턴스가 소멸됩니다.")
    }
}

var sample: Person? = Person()
sample = nil

//Person 클래스의 인스턴스가 소멸됩니다.
```

보통 deinit메서드는 인스턴스가 메모리에서 해제되기 직전에 처리할 코드를 넣어준다.

예를 들어 인스턴스 소멸 전에 데이터를 저장한다거나 다른 객체에 인스턴스 소멸을 알려야 할 때는 특히 

deinit메서드를 구현해야 한다. 

# Reference
