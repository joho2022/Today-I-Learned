# ğŸ”Ÿ í”„ë¡œí¼í‹°ì™€ ë©”ì„œë“œ - í‚¤ ê²½ë¡œ

`10ì›” 31ì¼`

í”„ë¡œí¼í‹°ëŠ” ì–´ë–¤ í”„ë¡œí¼í‹°ì˜ ìœ„ì¹˜ë§Œ ì°¸ì¡°í•˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤. ì´ê²ƒì„ ë°”ë¡œ í‚¤ ê²½ë¡œë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.

í‚¤ ê²½ë¡œë¥¼ ì‚¬ìš©í•˜ì—¬ ê°„ì ‘ì  íŠ¹ì • íƒ€ì…ì˜ ì–´ë–¤ í”„ë¡œí¼í‹° ê°’ì„ ê°€ë¦¬ì¼œì•¼ í• ì§€ ë¯¸ë¦¬ ì§€ì •í•´ë‘ê³  ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

í‚¤ ê²½ë¡œ íƒ€ì…ì€ AnyKeyPathë¼ëŠ” í´ë˜ìŠ¤ë¡œë¶€í„° íŒŒìƒëœë‹¤. ì œì¼ ë§ì´ í™•ì¥ëœ í‚¤ ê²½ë¡œ íƒ€ì…ì€ 

WritableKeyPath<Root, Value>ì™€ ReferenceWriteableKeyPath<Root, Value>íƒ€ì…ì´ë‹¤.

WritableKeyPath<Root, Value>íƒ€ì…ì€ ê°’ íƒ€ì…ì— í‚¤ ê²½ë¡œ íƒ€ì…ìœ¼ë¡œ ì½ê³  ì“¸ ìˆ˜ ìˆëŠ” ê²½ìš°ì— ì ìš©ë˜ë©°,

ReferenceWriteableKeyPath<Root, Value>íƒ€ì…ì€ ì°¸ì¡° íƒ€ì…, ì¦‰ í´ë˜ìŠ¤ íƒ€ì…ì— í‚¤ ê²½ë¡œ íƒ€ì…ìœ¼ë¡œ ì¼ê³  ì“¸ ìˆ˜ ìˆëŠ” ê²½ìš°ì— ì ìš©ëœë‹¤.

í‚¤ ê²½ë¡œëŠ” ì—­ìŠ¬ë˜ìŠ¤(\)ì™€ íƒ€ì…. ë§ˆì¹¨í‘œ(.)ê²½ë¡œë¡œ êµ¬ì„±ëœë‹¤.

```swift
\íƒ€ì…ì´ë¦„.ê²½ë¡œ.ê²½ë¡œ.ê²½ë¡œ
```

ê²½ë¡œëŠ” í”„ë¡œí¼í‹° ì´ë¦„ì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.

### í‚¤ ê²½ë¡œ íƒ€ì…ì˜ íƒ€ì…í™•ì¸

```swift
class Person {
    var name: String
    
    init(name: String) {
        self.name = name
    }
}

struct Stuff {
    var name: String
    var owner: Person
}

print(type(of: \Person.name))

print(type(of: \Stuff.name))

//ReferenceWritableKeyPath<Person, String>
//WritableKeyPath<Stuff, String>
```

í‚¤ ê²½ë¡œëŠ” ê¸°ì¡´ì˜ í‚¤ ê²½ë¡œì— í•˜ìœ„ ê²½ë¡œë¥¼ ë§ë¶™ì—¬ ì¤„ ìˆ˜ ìˆë‹¤.

### í‚¤ ê²½ë¡œ íƒ€ì…ì˜ ê²½ë¡œì—°ê²°

```swift
let keyPath = \Stuff.owner
let nameKeyPath = keyPath.appending(path: \.name)
```

ê° ì¸ìŠ¤í„´ìŠ¤ì˜ keyPath ì„œë¸ŒìŠ¤í¬ë¦½íŠ¸ ë©”ì„œë“œì— í‚¤ ê²½ë¡œë¥¼ ì „ë‹¬í•˜ì—¬ í”„ë¡œí¼í‹°ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

### keyPath ì„œë¸ŒìŠ¤í¬ë¦½íŠ¸ì™€ í‚¤ ê²½ë¡œ í™œìš©

```swift
class Person {
    var name: String
    
    init(name: String) {
        self.name = name
    }
}

struct Stuff {
    var name: String
    var owner: Person
}

let hogeun = Person(name: "hogeun")
let hana = Person(name: "hana")
let macbook = Stuff(name: "MacBook Pro", owner: hogeun)
var iMac = Stuff(name: "iMac", owner: hogeun)
let iPhone = Stuff(name: "iPhone", owner: hana)

let stuffNameKeyPath = \Stuff.name
let ownerkeyPath = \Stuff.owner

// \Stuff.owner.nameê³¼ ê°™ì€ í‘œí˜„
let ownerNameKeyPath = ownerkeyPath.appending(path: \.name)

// í‚¤ ê²½ë¡œì™€ ì„œë¸ŒìŠ¤í¬ë¦½íŠ¸ë¥¼ ì´ìš©í•´ í”„ë¡œí¼í‹°ì— ì ‘ê·¼í•˜ì—¬ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤.
print(macbook[keyPath: stuffNameKeyPath])
print(iMac[keyPath: stuffNameKeyPath])
print(iPhone[keyPath: stuffNameKeyPath])
// MacBook Pro
//iMac
//iPhone

print(macbook[keyPath: ownerNameKeyPath])
print(iMac[keyPath: ownerNameKeyPath])
print(iPhone[keyPath: ownerNameKeyPath])
//hogeun
//hogeun
//hana

// í‚¤ ê²½ë¡œì™€ ì„œë¸Œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì´ìš©í•´ í”„ë¡œí¼í‹°ì— ì ‘ê·¼í•˜ì—¬ ê°’ì„ ë³€ê²½í•œë‹¤.
iMac[keyPath: stuffNameKeyPath] = "iMac Pro"
iMac[keyPath: ownerNameKeyPath] = "jojo"
print(iMac[keyPath: stuffNameKeyPath])
print(iMac[keyPath: ownerNameKeyPath])
//iMac Pro
//jojo

// ìƒìˆ˜ë¡œ ì§€ì •í•œ ê°’ íƒ€ì…ê³¼ ì½ê¸° ì „ìš© í”„ë¡œí¼í‹°ëŠ” í‚¤ ê²½ë¡œ ì„­ìŠ¤í¬ë¦½íŠ¸ë¡œë„ ê°’ì„ ë°”ê¿”ì¤„ ìˆ˜ ì—†ë‹¤.
```

í‚¤ ê²½ë¡œë¥¼ ì˜ í™œìš©í•˜ë©´ í”„ë¡œí† ì½œê³¼ ë§ˆì°¬ê°€ì§€ë¡œ íƒ€ì… ê°„ì˜ ì˜ì¡´ì„±ì„ ë‚®ì¶”ëŠ” ë° ë§ì€ ë„ì›€ì„ ì¤€ë‹¤.

ë˜, ì• í”Œì˜ í”„ë ˆì„ì›Œí¬ëŠ” í‚¤-ê°’ ì½”ë”© ë“± ë§ì€ ê³³ì— í‚¤ ê²½ë¡œë¥¼ í™œìš©í•˜ë¯€ë¡œ,  ë§ì€ ë„ì›€ì´ ë  ê²ƒì´ë‹¤.

### [ NOTE ] ì ‘ê·¼ ìˆ˜ì¤€ê³¼ í‚¤ ê²½ë¡œ

í‚¤ ê²½ë¡œëŠ” íƒ€ì… ì™¸ë¶€ë¡œ ê³µê°œëœ ì¸ìŠ¤í„´ìŠ¤ í”„ë¡œí¼í‹° í˜¹ì€ ì„œë¸ŒìŠ¤í¬ë¦½íŠ¸ì— í•œí•˜ì—¬ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.

### [ TIP ] ìì‹ ì„ ë‚˜íƒ€ë‚´ëŠ” í‚¤ ê²½ë¡œì¸ \.selfë¥¼ ì‚¬ìš©í•˜ë©´ ì¸ìŠ¤í„´ìŠ¤ ê·¸ ìì²´ë¥¼ í‘œí˜„í•˜ëŠ” í‚¤ ê²½ë¡œê°€ ëœë‹¤. ë˜, ì»´íŒŒì¼ëŸ¬ê°€ íƒ€ì…ì„ ìœ ì¶”í•  ìˆ˜ ìˆëŠ” ê²½ìš°ì—ëŠ” í‚¤ ê²½ë¡œì—ì„œ íƒ€ì… ì´ë¦„ì„ ìƒëµí•  ìˆ˜ ìˆë‹¤.

ìŠ¤ìœ„í”„íŠ¸ 5.2ë²„ì „ë¶€í„° (SomeType) â†’ Value íƒ€ì…ì˜ í´ë¡œì €ë¥¼ í‚¤ ê²½ë¡œ í‘œí˜„ìœ¼ë¡œ ëŒ€ì²´í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

### í´ë¡œì €ë¥¼ ëŒ€ì²´í•  ìˆ˜ ìˆëŠ” í‚¤ ê²½ë¡œ í‘œí˜„

```swift
struct Person {
    let name: String
    let nickName: String?
    let age: Int
    
    var isAdult: Bool {
        return age > 18
    }
}

let hogeun: Person = Person(name: "hogeun", nickName: "bear", age: 100)
let hana: Person = Person(name: "hana", nickName: "na", age: 100)
let happy: Person = Person(name: "happy", nickName: nil, age: 3)

let family: [Person] = [hogeun, hana, happy]
let names: [String] = family.map ( \.name)
let nickName: [String] = family.compactMap(\.nickName)
let adults: [String] = family.filter(\.isAdult).map(\.name)
```

# Reference

ì•¼ê³°ì§€ìŒ - ìŠ¤ìœ„í”„íŠ¸ í”„ë¡œê·¸ë˜ë° 3íŒ
